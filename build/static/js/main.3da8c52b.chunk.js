(this["webpackJsonpcenotes-reaction"]=this["webpackJsonpcenotes-reaction"]||[]).push([[0],{284:function(e){e.exports=JSON.parse('{"a":"0.7.0"}')},287:function(e,t,a){e.exports=a(509)},507:function(e,t,a){},509:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(35),i=a.n(r),l=a(40),o=a(41),c=a(43),h=a(42),d=a(44),u=a(513),m=a(514),p=a(511),E=a(9),y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).handlePayloadChange=function(e){a.setState({payload:"/"+e.target.value})},a.handleKeyChange=function(e){a.setState({key:"/"+e.target.value})},a.state={key:"",payload:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h1",{className:"ui header center aligned green"},"Decrypt"),s.a.createElement(E.o,null,s.a.createElement(E.h,null,s.a.createElement(E.h.Field,null,s.a.createElement("label",null,"Payload"),s.a.createElement(E.p,{onChange:this.handlePayloadChange,autoHeight:!0,rows:1,placeholder:"Enter the payload here"})),s.a.createElement(E.h.Field,null,s.a.createElement("label",null,"Key"),s.a.createElement(E.p,{onChange:this.handleKeyChange,rows:1,autoHeight:!0,placeholder:"Enter key here"})),s.a.createElement(E.b,{as:p.a,to:{pathname:"/decrypt".concat(this.state.payload).concat(this.state.key)},positive:!0},"Decrypt"))))}}]),t}(s.a.Component),g=a(286),v=a(21),f=a.n(v);a(257);function b(e){if(200===e.status)return e;var t=new Error("HTTP Error ".concat(e.statusText));throw t.status=e.statusText,t.response=e,t}function k(e){if(-1!==[200,400,404].indexOf(e.status))return e;var t=new Error("HTTP Error ".concat(e.statusText));throw t.status=e.statusText,t.response=e,t}function x(e){return e.json()}var C={sendDecryptionRequest:function(e,t){return fetch("/notes/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:e}).then(k).then(x).then((function(e){return t({},e)})).catch(t)},sendEncryptRequest:function(e,t){return fetch("/notes/encrypt/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:e}).then(k).then(x).then((function(e){return t({},e)})).catch(t)},fetchAlgorithmOptions:function(e){return fetch("/config/algorithms/").then(b).then(x).then((function(t){return e({},t)})).catch(e)},fetchDefaultAlgorithmOptions:function(e){return fetch("/config/algorithms/default").then(b).then(x).then((function(t){return e({},t)})).catch(e)}},w=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).state={activeIndex:0},a.handleFetchAlgoCb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};0===Object.getOwnPropertyNames(e).length&&a.setState({supported_algorithm_options:Object.keys(t).map((function(e){return t[e].hardness.map((function(t){return{value:"".concat(e," ").concat(t),text:"".concat(e," ").concat(t)}}))})).reduce((function(e,t){return e.concat(t)}),[])})},a.handleDefaultAlgoCb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};0===Object.getOwnPropertyNames(e).length&&a.setState({algorithm:t.algorithm,hardness:t.hardness})},a.handleAccordionClick=function(e,t){var n=t.index,s=a.state.activeIndex===n?-1:n;a.setState({activeIndex:s})},a.handleStoreChange=function(e){var t=!a.state.store;t?a.setState({enableMaxVisits:!0,expirationDate:f()().add(2,"week"),expirationDateEnabled:!0,max_visits:1}):a.setState({enableMaxVisits:!1,max_visits:0,expirationDateEnabled:!1,expirationDate:null}),a.setState({store:t})},a.handleMaxVisitsChange=function(e){a.state.enableMaxVisits&&a.setState({max_visits:Number(e.target.value)||1})},a.handlePasswordChange=function(e){a.setState({password:e.target.value})},a.handlePlaintextChange=function(e){a.setState({plaintext:e.target.value})},a.handleExpirationDateChange=function(e){a.setState({expirationDate:e})},a.handleAlgorithmOptionSet=function(e,t){a.setState({algorithm:t.value.split(" ")[0],hardness:t.value.split(" ")[1]})},a.state={password:"",plaintext:"",expiration:"",store:!0,max_visits:1,enableMaxVisits:!0,expirationDate:f()().add(2,"week"),expirationDatePlaceHolder:"Note does not expire",expirationDateEnabled:!0,algorithm:"",hardness:"",supported_algorithm_options:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){C.fetchAlgorithmOptions(this.handleFetchAlgoCb),C.fetchDefaultAlgorithmOptions(this.handleDefaultAlgoCb)}},{key:"render",value:function(){var e=this.state.activeIndex;return s.a.createElement("div",null,s.a.createElement("h1",{className:"ui header center aligned red"},"Encrypt"),s.a.createElement(E.n,{positive:!0,hidden:!this.state.showSuccess,header:this.state.successMessageHeader,onDismiss:this.handleCloseSuccess}),s.a.createElement(E.n,{negative:!0,hidden:!this.state.showError,onDismiss:this.handleCloseError,header:"There were some errors with your submission",content:this.state.errormessage}),s.a.createElement("p",null),s.a.createElement(E.o,null,s.a.createElement(E.h,null,s.a.createElement(E.h.Field,null,s.a.createElement("label",null,"Note"),s.a.createElement(E.p,{onChange:this.handlePlaintextChange,rows:"1",autoHeight:!0,placeholder:"Enter your note here"})),s.a.createElement(E.h.Field,null,s.a.createElement("label",null,"Password to generate key"),s.a.createElement(E.p,{onChange:this.handlePasswordChange,rows:"1",autoHeight:!0,placeholder:"Enter password here"})),s.a.createElement(E.a,{fluid:!0,styled:!0},s.a.createElement(E.a.Title,{active:0===e,index:0,onClick:this.handleAccordionClick},s.a.createElement(E.j,{name:"dropdown"}),"More options"),s.a.createElement(E.a.Content,{active:0===e},s.a.createElement("div",null,"Max visits: ",this.state.max_visits),s.a.createElement(E.k,{type:"range",min:1,max:100,value:this.state.max_visits,disabled:!this.state.enableMaxVisits,onChange:this.handleMaxVisitsChange}),s.a.createElement("div",null,s.a.createElement(E.c,{label:"Store on server",checked:this.state.store,onChange:this.handleStoreChange})),s.a.createElement(g.a,{selected:this.state.expirationDate,onChange:this.handleExpirationDateChange,placeholderText:this.state.expirationDatePlaceHolder,isClearable:!0,disabled:!this.state.expirationDateEnabled,dateFormat:"DD/MM/YYYY",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select"}),s.a.createElement("span",{hidden:!this.state.algorithm},"Algorithm used to generate key: "," ",s.a.createElement(E.g,{inline:!0,onChange:this.handleAlgorithmOptionSet,value:this.state.algorithm.concat(" ",this.state.hardness),options:this.state.supported_algorithm_options})))),s.a.createElement("p",null),s.a.createElement(p.a,{to:{pathname:"/encrypt/go/",query:{plaintext:this.state.plaintext,password:this.state.password,max_visits:this.state.max_visits,no_store:!Boolean(this.state.store),expiration_date:this.state.expirationDate||"",algorithm:this.state.algorithm,hardness:this.state.hardness}}},s.a.createElement(E.b,{negative:!0},"Encrypt")))),s.a.createElement("p",null))}}]),t}(s.a.Component),S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).handleSubmitCb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.setState({showSuccess:t.success,plaintext:t.plaintext,errormessage:t.error||e.message,showPlaintext:t.plaintext,showError:t.error||e.message})},a.decrypt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";C.sendDecryptionRequest(JSON.stringify({payload:e,key:t}),a.handleSubmitCb)},a.handleCloseError=function(e){a.setState({showError:!1})},a.handleCloseSuccess=function(e){a.setState({showSuccess:!1})},a.state={key:"",payload:"",plaintext:"",errormessage:"",showError:!1,showPlaintext:!1,showSuccess:!1,showLoader:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.payload,a=e.key;this.decrypt(t,a)}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(E.n,{positive:!0,hidden:!this.state.showSuccess,header:"Note was decrypted successfully!",onDismiss:this.handleCloseSuccess}),s.a.createElement(E.n,{negative:!0,hidden:!this.state.showError,onDismiss:this.handleCloseError,header:"There were some errors with your submission",content:this.state.errormessage}),s.a.createElement("p",null),s.a.createElement(E.e,{active:this.state.showLoader},s.a.createElement(E.m,null,"Sending decryption request")),s.a.createElement("p",null),s.a.createElement(E.o,{hidden:!this.state.showPlaintext},s.a.createElement(E.d,{hidden:!this.state.showPlaintext},this.state.plaintext)),s.a.createElement("p",null))}}]),t}(s.a.Component),D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).state={activeIndex:0},a.handleSubmitCb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.setState({showSuccess:t.success,payload:t.payload,key:t.key,duressKey:t.duress_key,errormessage:t.error||e.message,showError:t.error||e.message,showEncryptionResults:t.success,showLoader:!1,successMessageHeader:"Note was encrypted successfully"})},a.handleAccordionClick=function(e,t){var n=t.index,s=a.state.activeIndex===n?-1:n;a.setState({activeIndex:s})},a.handleCloseError=function(e){a.setState({showError:!1})},a.handleCloseSuccess=function(e){a.setState({showSuccess:!1})},a.copyInputToClipboard=function(e){var t=e.target.parentElement.querySelector('[name="decrypt-link"]');a.selectInput({target:t}),document.execCommand("copy"),a.setState({successMessageHeader:"Link copied successfully"})},a.selectInput=function(e){e.target.select()},a.handleExpirationDateChange=function(e){a.setState({expirationDate:e})},a.handleCloseDim=function(){a.setState({showLoader:!1})},a.state={key:"",duressKey:"",payload:"",showSuccess:!1,showError:!1,showEncryptionResults:!1,showLoader:!1,successMessageHeader:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){if(this.props.location.query){this.setState({showError:!1,showSuccess:!1,showEncryptionResults:!1});var e=this.props.location.query,t=e.plaintext,a=e.password,n=e.no_store,s=e.max_visits,r=e.expiration_date,i=e.algorithm,l=e.hardness;t&&(this.setState({showLoader:!0,shouldDim:!0}),C.sendEncryptRequest(JSON.stringify({plaintext:t,key:a,max_visits:s,no_store:n,expiration_date:r,algorithm:i,hardness:l}),this.handleSubmitCb))}}},{key:"craftDecryptLink",value:function(){return"".concat(window.location.origin,"/decrypt/").concat(this.state.payload,"/").concat(this.state.key)}},{key:"craftDuressLink",value:function(){return"".concat(window.location.origin,"/decrypt/").concat(this.state.payload,"/").concat(this.state.duressKey)}},{key:"render",value:function(){var e=this.state.activeIndex;return s.a.createElement("div",null,s.a.createElement(E.n,{positive:!0,hidden:!this.state.showSuccess,header:this.state.successMessageHeader,onDismiss:this.handleCloseSuccess}),s.a.createElement(E.n,{negative:!0,hidden:!this.state.showError,onDismiss:this.handleCloseError,header:"There were some errors with your submission",content:this.state.errormessage}),s.a.createElement("p",null),s.a.createElement(E.e,{active:this.state.showLoader,page:!0,onClickOutside:this.handleCloseDim},s.a.createElement(E.m,{indeterminate:!0},"Sending encryption request")),s.a.createElement(E.o,{hidden:!this.state.showEncryptionResults},s.a.createElement(E.h,null,s.a.createElement(E.h.Field,null,s.a.createElement(E.l,null,"Share privately the following link to decrypt the note"),s.a.createElement(E.k,{name:"decrypt-link",icon:s.a.createElement(E.j,{name:"clipboard",link:!0,onClick:this.copyInputToClipboard}),value:this.craftDecryptLink(),onClick:this.selectInput})),s.a.createElement(E.a,{fluid:!0,styled:!0},s.a.createElement(E.a.Title,{active:1===e,index:1,onClick:this.handleAccordionClick},s.a.createElement(E.j,{name:"dropdown"}),"Advanced sharing"),s.a.createElement(E.a.Content,{active:1===e},s.a.createElement(E.h.Field,null,s.a.createElement(E.l,null,"This is the payload (you can share this in public)"),s.a.createElement(E.k,{name:"decrypt-link",value:this.state.payload,icon:s.a.createElement(E.j,{name:"clipboard",link:!0,onClick:this.copyInputToClipboard}),onClick:this.selectInput})),s.a.createElement(E.h.Field,null,s.a.createElement(E.l,null,"This is the key (you should share this in private)"),s.a.createElement(E.k,{name:"decrypt-link",value:this.state.key,icon:s.a.createElement(E.j,{name:"clipboard",link:!0,onClick:this.copyInputToClipboard}),onClick:this.selectInput})))),s.a.createElement("div",{hidden:!this.state.duressKey},s.a.createElement(E.f,{horizontal:!0},"OR"),s.a.createElement(E.h.Field,null,s.a.createElement(E.l,null,"Share the following duress link to delete the note"),s.a.createElement(E.k,{name:"decrypt-link",icon:s.a.createElement(E.j,{name:"clipboard",link:!0,onClick:this.copyInputToClipboard}),value:this.craftDuressLink(),onClick:this.selectInput})),s.a.createElement(E.a,{fluid:!0,styled:!0},s.a.createElement(E.a.Title,{active:2===e,index:2,onClick:this.handleAccordionClick},s.a.createElement(E.j,{name:"dropdown"}),"Advanced sharing"),s.a.createElement(E.a.Content,{active:2===e},s.a.createElement(E.h.Field,null,s.a.createElement(E.l,null,"This is the payload (you can share this in public)"),s.a.createElement(E.k,{name:"decrypt-link",value:this.state.payload,icon:s.a.createElement(E.j,{name:"clipboard",link:!0,onClick:this.copyInputToClipboard}),onClick:this.selectInput})),s.a.createElement(E.h.Field,null,s.a.createElement(E.l,null,"This is the duress key (you can share this in public)"),s.a.createElement(E.k,{name:"decrypt-link",value:this.state.duressKey,icon:s.a.createElement(E.j,{name:"clipboard",link:!0,onClick:this.copyInputToClipboard}),onClick:this.selectInput}))))))),s.a.createElement("p",null))}}]),t}(s.a.Component),O=a(284),j=function(){return s.a.createElement("main",null,s.a.createElement(u.a,null,s.a.createElement(m.a,{exact:!0,path:"/decrypt/:payload/:key",component:S}),s.a.createElement(m.a,{path:"/decrypt/",component:y}),s.a.createElement(m.a,{exact:!0,path:"/encrypt/",component:w}),s.a.createElement(m.a,{exact:!0,path:"/encrypt/go/",component:D})))},T=function(){return s.a.createElement("header",null,s.a.createElement(E.i,{as:"h2",icon:!0,textAlign:"center"},s.a.createElement(E.j,{name:"privacy"}),s.a.createElement(E.i.Content,null,"Welcome to CENotes",s.a.createElement(E.i.Subheader,null,"version: ",O.a))),s.a.createElement("div",{className:"ui center aligned header tiny"},s.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://cenotes.readthedocs.io/en/latest/readme.html#what-is-this"},"What is this about?",s.a.createElement("i",{className:"ui help circle icon"}))),s.a.createElement("p",null),s.a.createElement("div",{className:"ui center aligned basic segment"},s.a.createElement(p.a,{className:"ui red basic button",to:"/encrypt"},"Encrypt Note ",s.a.createElement("i",{className:"lock icon"})),s.a.createElement("div",{className:"ui horizontal divider"},"Or"),s.a.createElement(p.a,{className:"ui green basic button",to:"/decrypt"},"Decrypt Note ",s.a.createElement("i",{className:"unlock icon"}))))},N=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(T,null),s.a.createElement("div",{className:"ui section hidden divider"}),s.a.createElement("div",{className:"ui text container"},s.a.createElement(j,null)))}}]),t}(n.Component),I=(a(507),a(508),a(512));i.a.render(s.a.createElement(I.a,null,s.a.createElement(N,null)),document.getElementById("root"))}},[[287,1,2]]]);
//# sourceMappingURL=main.3da8c52b.chunk.js.map